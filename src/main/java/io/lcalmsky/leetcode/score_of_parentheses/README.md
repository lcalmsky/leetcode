# 풀이

```java
import java.util.Stack;

public class Solution {
    public int scoreOfParentheses(String S) {
        Stack<Integer> stack = new Stack<>();
        stack.push(0);
        for (int i = 0; i < S.length(); i++) {
            if (S.charAt(i) == '(') stack.push(0);
            else {
                int x = stack.pop();
                int y = stack.pop();
                stack.push(y + Math.max(2 * x, 1));
            }
        }
        return stack.pop();
    }
}
```

이 문제의 핵심은 (1)괄호가 바로 닫힐 때 1을 더해주고, (2)중첩될 때 2를 곱하는 것 입니다. 괄호가 바로 닫히는 것이 연속으로 나타나는 케이스는 (1)케이스와 동일하므로 고려할 필요가 없습니다.

괄호 문제 해결을 위해선 `Stack`을 사용합니다.

먼저 stack 객체 생성 후 0을 넣어 초기화합니다.

문자열(괄호)을 순차적으로 탐색하면서 괄호가 열리는 시점에 스택에 0을 추가하고 괄호가 닫히는 시점에 마지막에 입력된 두 개의 괄호에 대한 값을 꺼내 연산을 수행합니다.

(1)번 케이스의 경우 '(', ')'를 순차적으로 탐색하기 때문에 스택에 [0, 0]이 입력되고 ')' 시점에 `Math.max(2 * 0, 1)`을 수행해 1의 값을 얻게 됩니다.

(2)번 케이스의 경우 스택에서 값을 꺼내는 시점만 고려하면 됩니다. 중첩되려면 괄호가 '))' 이런식으로 표현되어야 하지만 else 부분이 호출되는 시점은 ')'가 처음 나타났을 경우이기 때문에 앞서 계산된 결과를
다음 연산에 적용하여 두 배 씩 값이 증가하게 됩니다.

(1), (2)번 케이스가 복합적으로 나타나더라도 '(' 괄호를 탐색하는 시점에 스택에 '0' 값을 넣어주기 때문에 기존 값에서 곱해지는 게 아닌 기본 값 1이 추가되고 연산한 결과를 다시 스택에 넣어주어 연산이
정확하게 동작하게 됩니다. 
